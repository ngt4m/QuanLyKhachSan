@model QuanLyKhachSan.ViewModels.Room.RoomListViewModel

@{
    ViewData["Title"] = "Danh Sách Phòng";
}

@section Styles {
    <link rel="stylesheet" href="~/css/rooms.css" />
}

<div class="rooms-page">
    <!-- Header Banner -->
    <div class="page-header">
        <div class="container">
            <h1 class="page-title">Danh Sách Phòng</h1>
            <p class="page-subtitle">Khám phá và chọn phòng phù hợp với bạn</p>
        </div>
    </div>

    <div class="container mt-5">
        <!-- Search and Filter Section -->
        <div class="filter-card">
            <div class="filter-header">
                <i class="fas fa-search"></i>
                <h5>Tìm Kiếm & Lọc Phòng</h5>
            </div>
            <div class="card-body">
                <form method="get" class="row g-3">
                    <div class="col-md-4">
                        <label class="form-label">Tìm kiếm</label>
                        <div class="input-group">
                            <span class="input-group-text"><i class="fas fa-search"></i></span>
                            <input type="text" name="searchTerm" class="form-control" placeholder="Nhập tên phòng..." value="@Model.SearchTerm">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <label class="form-label">Loại phòng</label>
                        <select name="roomType" class="form-control">
                            <option value="">Tất cả loại</option>
                            <option value="Standard" selected="@(Model.RoomType == "Standard")">Standard</option>
                            <option value="Deluxe" selected="@(Model.RoomType == "Deluxe")">Duluxe</option>
                            <option value="Suite" selected="@(Model.RoomType == "Suite")">Suite</option>
                            <option value="Family" selected="@(Model.RoomType == "Family")">Family</option>
                        </select>
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Giá tối thiểu</label>
                        <input type="number" name="minPrice" class="form-control" placeholder="0₫" value="@Model.MinPrice">
                    </div>
                    <div class="col-md-2">
                        <label class="form-label">Giá tối đa</label>
                        <input type="number" name="maxPrice" class="form-control" placeholder="10,000,000₫" value="@Model.MaxPrice">
                    </div>
                    <div class="col-md-1 d-flex align-items-end">
                        <button type="submit" class="btn btn-primary w-100">
                            <i class="fas fa-filter"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Results Count -->
        @if (Model.Rooms.Any())
        {
            <div class="results-info">
                <i class="fas fa-info-circle"></i>
                <span>Tìm thấy <strong>@Model.Rooms.Count()</strong> phòng phù hợp</span>
            </div>
        }

        <!-- Rooms Grid -->
        <div class="row">
            @foreach (var room in Model.Rooms)
            {
                <div class="col-md-4 mb-4">
                    <div class="card room-card h-100">
                        <div class="room-image-wrapper">
                            <img src="@room.ImageUrl" class="card-img-top" alt="@room.Name">
                            <div class="room-badge">
                                <span class="type badge bg-primary">@room.Type</span>
                            </div>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">@room.Name</h5>
                            <p class="card-text flex-grow-1">@room.Description</p>

                            <div class="room-divider"></div>

                            <div class="room-info mb-3">
                                <div class="price-section">
                                    <span class="price-label">Giá mỗi đêm</span>
                                    <span class="price">@room.Price.ToString("N0")₫</span>
                                </div>
                            </div>

                            <div class="rating mb-3">
                                <div class="stars">
                                    @for (int i = 1; i <= 5; i++)
                                    {
                                        <span class="star @(i <= room.AverageRating ? "filled" : "")">★</span>
                                    }
                                </div>
                                <span class="review-count">(@room.ReviewCount đánh giá)</span>
                            </div>

                            <div class="mt-auto">
                                <a href="@Url.Action("Details", "Rooms", new { id = room.Id })" class="btn btn-view-details w-100">
                                    <i class="fas fa-eye"></i> Xem Chi Tiết
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }

            @if (!Model.Rooms.Any())
            {
                <div class="col-12">
                    <div class="no-results">
                        <div class="no-results-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <h4>Không tìm thấy phòng phù hợp</h4>
                        <p>Vui lòng thử điều chỉnh tiêu chí tìm kiếm của bạn.</p>
                        <a href="@Url.Action("Rooms", "Home")" class="btn btn-primary">
                            <i class="fas fa-redo"></i> Xem tất cả phòng
                        </a>
                    </div>
                </div>
            }
        </div>
    </div>
</div>